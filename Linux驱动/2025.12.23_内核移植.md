### 移植正点原子教程内核（改变交叉编译器）
- uboot就用修改好的，没有任何问题
- 内核版本V2.4及之后的linux-imx-rel_imx_4.1.15_2.1.0_ga_alientek.tar.bz2
- 交叉编译器：gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf.tar

### 过程
- 解压内核压缩包
- 修改自动化脚本imx6ull_alientek_emmc.sh
```
#!/bin/sh
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- distclean
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- imx_alientek_emmc_defconfig
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- menuconfig
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- all -j2 //2线程
```
- ==重点== 修改script/dtc/dtc-parser.tab.c_shipped 第73行的YYLTYPE yylloc; 头部添加extern
- ./imx6ull_alientek_emmc.sh运行脚本

### 编译没有zImage
- pip install lzop

### Uboot启动后需要设置的内容
- 网络设置
```
setenv ipaddr 192.168.8.22 //开发板 IP 地址
setenv ethaddr b8:ae:1d:01:00:00 //开发板网卡 MAC 地址
setenv gatewayip 192.168.8.1 //开发板默认网关
setenv netmask 255.255.255.0 //开发板子网掩码
setenv serverip 192.168.8.88 //服务器地址，也就是 Ubuntu 地址
saveenv //保存环境变量
```
- bootargs和bootcmd设置
```
网络启动(提前设置uboot里的网络)
setenv bootargs 'console=ttymxc0,115200 rw root=/dev/nfs nfsroot=192.168.8.88:/home/voyager/Linux/nfs/rootfs,proto=tcp rw ip=192.168.8.22:192.168.8.88:192.168.8.1:255.255.255.0::eth0:off'

setenv bootcmd 'tftp 80800000 zImage; tftp 83000000 imx6ull-alientek-emmc.dtb; bootz 80800000 - 83000000'

saveenv


emmc启动
setenv bootargs 'console=ttymxc0,115200 root=/dev/mmcblk1p2 rootwait rw'

setenv bootcmd 'mmc dev 1; fatload mmc 1:1 80800000 zImage; fatload mmc 1:1 83000000 imx6ull-alientek-emmc.dtb; bootz 80800000 - 83000000;'

saveenv
```
- ==最终我选择的方案==  Uboot和跟文件系统用emmc，内核和设备树用tftp
```
# 核心：root=/dev/mmcblk1p2 指定eMMC第2分区为根文件系统（与你之前烧录根文件系统的分区一致） setenv bootargs 'console=ttymxc0,115200 rw root=/dev/mmcblk1p2 rootwait'
# 确保bootcmd是TFTP加载逻辑（若已配置可跳过，直接执行后续保存/启动） setenv bootcmd 'tftp 80800000 zImage; tftp 83000000 imx6ull-alientek-emmc.dtb; bootz 80800000 - 83000000'
# 先切换到eMMC（mmc1），再保存（适配你的U-Boot版本）
mmc dev 1 saveenv
```